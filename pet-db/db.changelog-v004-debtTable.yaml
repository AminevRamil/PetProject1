databaseChangeLog:
  - changeSet:
      id: Add Users' State Table
      author: Aminev Ramil
      changes:
        - addUniqueConstraint:
            columnNames: TG_ID
            constraintName: telegram_users_un
            deferrable: false
            disabled: false
            initiallyDeferred: false
            schemaName: public
            tableName: TELEGRAM_USERS
            validate: true
        - createTable:
            tableName: DEBTS
            columns:
              - column:
                  name: ID
                  type: bigint
                  autoIncrement: true
                  remarks: Идентификатор долга
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: TG_ID
                  type: bigint
                  autoIncrement: true
                  remarks: Идентификатор пользователя в Телеграм
                  constraints:
                    nullable: false
                    foreignKey: FK_USER_DEBT
                    reference: USERS(TG_ID)
              - column:
                  name: CURRENT_STATE
                  type: varchar(64)
                  remarks: Название текущего состояния работы с ботом
                  constraints:
                    nullable: false
              - column:
                  name: STATE_MEMO
                  type: jsonb
                  remarks: Информация о текущем состоянии пользователя
                  constraints:
                    nullable: true